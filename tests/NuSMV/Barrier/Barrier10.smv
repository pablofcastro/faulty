MODULE P(otherState0, otherState1, otherState2, otherState3, otherState4, otherState5, otherState6, otherState7, otherState8, otherPhase0, otherPhase1, otherPhase2, otherPhase3, otherPhase4, otherPhase5, otherPhase6, otherPhase7, otherPhase8)
VAR
    state : {ready, executing, success, error};
    ph:{ph1, ph2};
ASSIGN
next(state) := case
    state=ready & ((otherState0=ready & otherState1=ready  & otherState2=ready  & otherState3=ready  & otherState4=ready  & otherState5=ready  & otherState6=ready  & otherState7=ready  & otherState8=ready ) | (otherState0=executing | otherState1=executing | otherState2=executing | otherState3=executing | otherState4=executing | otherState5=executing | otherState6=executing | otherState7=executing | otherState8=executing)):{executing, error};
    state=executing & ((!(otherState0=ready) & !(otherState1=ready) & !(otherState2=ready) & !(otherState3=ready) & !(otherState4=ready) & !(otherState5=ready) & !(otherState6=ready) & !(otherState7=ready) & !(otherState8=ready)) | (otherState0=success & otherState1=success & otherState2=success & otherState3=success & otherState4=success & otherState5=success & otherState6=success & otherState7=success & otherState8=success)):{success, error};
    state=success & ((!(otherState0=executing) & !(otherState1=executing) & !(otherState2=executing) & !(otherState3=executing) & !(otherState4=executing) & !(otherState5=executing) & !(otherState6=executing) & !(otherState7=executing) & !(otherState8=executing))):{ready, error};
    state=error & ((!(otherState0=executing) & !(otherState1=executing) & !(otherState2=executing) & !(otherState3=executing) & !(otherState4=executing) & !(otherState5=executing) & !(otherState6=executing) & !(otherState7=executing) & !(otherState8=executing))):{ready, error};
    TRUE : {state, error};
esac;

next(ph):=case
    state=success & ((!(otherState0=executing) & !(otherState1=executing) & !(otherState2=executing) & !(otherState3=executing) & !(otherState4=executing) & !(otherState5=executing) & !(otherState6=executing) & !(otherState7=executing) & !(otherState8=executing)) & (otherPhase0=ph1 & otherState0=ready | otherPhase1=ph1 & otherState1=ready | otherPhase2=ph1 & otherState2=ready | otherPhase3=ph1 & otherState3=ready | otherPhase4=ph1 & otherState4=ready | otherPhase5=ph1 & otherState5=ready | otherPhase6=ph1 & otherState6=ready | otherPhase7=ph1 & otherState7=ready | otherPhase8=ph1 & otherState8=ready)) : ph1;
    state=success & ((!(otherState0=executing) & !(otherState1=executing) & !(otherState2=executing) & !(otherState3=executing) & !(otherState4=executing) & !(otherState5=executing) & !(otherState6=executing) & !(otherState7=executing) & !(otherState8=executing)) & (otherPhase0=ph2 & otherState0=ready | otherPhase1=ph2 & otherState1=ready | otherPhase2=ph2 & otherState2=ready | otherPhase3=ph2 & otherState3=ready | otherPhase4=ph2 & otherState4=ready | otherPhase5=ph2 & otherState5=ready | otherPhase6=ph2 & otherState6=ready | otherPhase7=ph2 & otherState7=ready | otherPhase8=ph2 & otherState8=ready)) : ph2;
    state=success & otherState0=success & otherState1=success & otherState2=success & otherState3=success & otherState4=success & otherState5=success & otherState6=success & otherState7=success & otherState8=success & ph = ph1 : ph2;
    state=success & otherState0=success & otherState1=success & otherState2=success & otherState3=success & otherState4=success & otherState5=success & otherState6=success & otherState7=success & otherState8=success & ph = ph2 : ph1;
    state=error & !(otherState0=executing) & !(otherState1=executing) & !(otherState2=executing) & !(otherState3=executing) & !(otherState4=executing) & !(otherState5=executing) & !(otherState6=executing) & !(otherState7=executing) & !(otherState8=executing) & otherState0 = ready : otherPhase0;
    state=error & !(otherState0=executing) & !(otherState1=executing) & !(otherState2=executing) & !(otherState3=executing) & !(otherState4=executing) & !(otherState5=executing) & !(otherState6=executing) & !(otherState7=executing) & !(otherState8=executing) & otherState1 = ready : otherPhase1;
    state=error & !(otherState0=executing) & !(otherState1=executing) & !(otherState2=executing) & !(otherState3=executing) & !(otherState4=executing) & !(otherState5=executing) & !(otherState6=executing) & !(otherState7=executing) & !(otherState8=executing) & otherState2 = ready : otherPhase2;
    state=error & !(otherState0=executing) & !(otherState1=executing) & !(otherState2=executing) & !(otherState3=executing) & !(otherState4=executing) & !(otherState5=executing) & !(otherState6=executing) & !(otherState7=executing) & !(otherState8=executing) & otherState3 = ready : otherPhase3;
    state=error & !(otherState0=executing) & !(otherState1=executing) & !(otherState2=executing) & !(otherState3=executing) & !(otherState4=executing) & !(otherState5=executing) & !(otherState6=executing) & !(otherState7=executing) & !(otherState8=executing) & otherState4 = ready : otherPhase4;
    state=error & !(otherState0=executing) & !(otherState1=executing) & !(otherState2=executing) & !(otherState3=executing) & !(otherState4=executing) & !(otherState5=executing) & !(otherState6=executing) & !(otherState7=executing) & !(otherState8=executing) & otherState5 = ready : otherPhase5;
    state=error & !(otherState0=executing) & !(otherState1=executing) & !(otherState2=executing) & !(otherState3=executing) & !(otherState4=executing) & !(otherState5=executing) & !(otherState6=executing) & !(otherState7=executing) & !(otherState8=executing) & otherState6 = ready : otherPhase6;
    state=error & !(otherState0=executing) & !(otherState1=executing) & !(otherState2=executing) & !(otherState3=executing) & !(otherState4=executing) & !(otherState5=executing) & !(otherState6=executing) & !(otherState7=executing) & !(otherState8=executing) & otherState7 = ready : otherPhase7;
    state=error & !(otherState0=executing) & !(otherState1=executing) & !(otherState2=executing) & !(otherState3=executing) & !(otherState4=executing) & !(otherState5=executing) & !(otherState6=executing) & !(otherState7=executing) & !(otherState8=executing) & otherState8 = ready : otherPhase8;
    state=error & otherState0=success & otherState1=success & otherState2=success & otherState3=success & otherState4=success & otherState5=success & otherState6=success & otherState7=success & otherState8=success: otherPhase0;
    TRUE : ph;
esac;
DEFINE
    n := !(state=error);

MODULE main
VAR
    p0: P(p1.state,p2.state,p3.state,p4.state,p5.state,p6.state,p7.state,p8.state,p9.state,p1.ph,p2.ph,p3.ph,p4.ph,p5.ph,p6.ph,p7.ph,p8.ph,p9.ph);
    p1: P(p0.state,p2.state,p3.state,p4.state,p5.state,p6.state,p7.state,p8.state,p9.state,p0.ph,p2.ph,p3.ph,p4.ph,p5.ph,p6.ph,p7.ph,p8.ph,p9.ph);
    p2: P(p0.state,p1.state,p3.state,p4.state,p5.state,p6.state,p7.state,p8.state,p9.state,p0.ph,p1.ph,p3.ph,p4.ph,p5.ph,p6.ph,p7.ph,p8.ph,p9.ph);
    p3: P(p0.state,p1.state,p2.state,p4.state,p5.state,p6.state,p7.state,p8.state,p9.state,p0.ph,p1.ph,p2.ph,p4.ph,p5.ph,p6.ph,p7.ph,p8.ph,p9.ph);
    p4: P(p0.state,p1.state,p2.state,p3.state,p5.state,p6.state,p7.state,p8.state,p9.state,p0.ph,p1.ph,p2.ph,p3.ph,p5.ph,p6.ph,p7.ph,p8.ph,p9.ph);
    p5: P(p0.state,p1.state,p2.state,p3.state,p4.state,p6.state,p7.state,p8.state,p9.state,p0.ph,p1.ph,p2.ph,p3.ph,p4.ph,p6.ph,p7.ph,p8.ph,p9.ph);
    p6: P(p0.state,p1.state,p2.state,p3.state,p4.state,p5.state,p7.state,p8.state,p9.state,p0.ph,p1.ph,p2.ph,p3.ph,p4.ph,p5.ph,p7.ph,p8.ph,p9.ph);
    p7: P(p0.state,p1.state,p2.state,p3.state,p4.state,p5.state,p6.state,p8.state,p9.state,p0.ph,p1.ph,p2.ph,p3.ph,p4.ph,p5.ph,p6.ph,p8.ph,p9.ph);
    p8: P(p0.state,p1.state,p2.state,p3.state,p4.state,p5.state,p6.state,p7.state,p9.state,p0.ph,p1.ph,p2.ph,p3.ph,p4.ph,p5.ph,p6.ph,p7.ph,p9.ph);
    p9: P(p0.state,p1.state,p2.state,p3.state,p4.state,p5.state,p6.state,p7.state,p8.state,p0.ph,p1.ph,p2.ph,p3.ph,p4.ph,p5.ph,p6.ph,p7.ph,p8.ph);
SPEC
     AG(!(p1.ph = ph1 & p1.ph=ph2))
